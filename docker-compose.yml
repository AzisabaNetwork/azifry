version: '3.7'

services:
  database:
    image: mariadb:10.5.4-focal
    restart: always
    ports:
      - 3306:3306
    environment:
      TZ: Asia/Tokyo
      MYSQL_RANDOM_ROOT_PASSWORD: '1'
    volumes:
      - ./data/minecraft-mariadb:/var/lib/mysql
    command: --gdb --max-connections=1000
  mcredis:
    image: redis:6.0.6-alpine
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - ./data/minecraft-redis:/data
  bungee:
    image: ghcr.io/azisaba/bungee
    restart: always
    environment:
      TZ: Asia/Tokyo
    ports:
      - 8192:8192
      - 25565:25577
  lobby:
    image: ghcr.io/azisaba/lobby
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - ./worlds/lobby_world:/app/world
      - ./worlds/lobby_lobby:/app/lobby
  wave:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/wave:/app
    command: 'java -Dazi@wave -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.12.2.jar'
    depends_on:
      - database
  pvp:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/pvp:/app
    command: 'java -Dazi@pvp -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.8.8.jar'
    depends_on:
      - database
  parkour:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/parkour:/app
    command: 'java -Dazi@parkour -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.13.2.jar'
    depends_on:
      - database
  life:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/life:/app
    command: 'java -Dazi@life -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.15.2.jar'
    depends_on:
      - database
  lgw:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/lgw:/app
    command: 'java -Dazi@lgw -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -Dbungee=true -jar Yukkit.jar'
    depends_on:
      - database
  lgwf:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/lgwf:/app
    command: 'java -Dazi@lgwf -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.14.4.jar'
    depends_on:
      - database
  chibi:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/chibi:/app
    command: 'java -Dazi@chibi -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.15.2.jar'
    depends_on:
      - database
  rpg:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/rpg:/app
    command: 'java -Dazi@rpg -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.15.2.jar'
    depends_on:
      - database
  afk:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/afk:/app
    command: 'java -Dazi@afk -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.8.8.jar'
    depends_on:
      - database
  fsw:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/fsw:/app
    command: 'java -Dazi@fsw -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.12.2.jar'
    depends_on:
      - database
  coretol:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/coretol:/app
    command: 'java -Dazi@coretol -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.15.2.jar'
    depends_on:
      - database
  event:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/event:/app
    command: 'java -Dazi@event -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.13.2.jar'
    depends_on:
      - database
  mksrv:
    image: yukileafx/minecraft-alpine:latest
    restart: always
    environment:
      TZ: Asia/Tokyo
    volumes:
      - /opt/minecraft/mksrv:/app
    command: 'java -Dazi@event -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -jar paper-1.16.2.jar'
    depends_on:
      - database
